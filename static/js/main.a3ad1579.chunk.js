(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{161:function(e,t,a){e.exports={error:"Error404_error__qUIep"}},184:function(e,t,a){e.exports=a(237)},189:function(e,t,a){},190:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n,o,r=a(0),l=a.n(r),i=a(20),c=a.n(i),u=(a(189),a(190),a(310)),d=a(303),s=a(138),f=a(14),m=a(312),p=a(299),E=a(300),b=l.a.memo((function(e){console.log("AddItemForm render");var t=Object(r.useState)(""),a=Object(f.a)(t,2),n=a[0],o=a[1],i=Object(r.useState)(null),c=Object(f.a)(i,2),u=c[0],d=c[1],s=function(){""!==n.trim()?(e.addItem(n),o("")):d("Title is required")};return l.a.createElement("div",null,l.a.createElement(m.a,{variant:"outlined",error:!!u,value:n,onChange:function(e){o(e.currentTarget.value)},onKeyPress:function(e){null!==u&&d(null),13===e.charCode&&s()},label:"Title",helperText:u,disabled:"loading"===e.entityStatus}),l.a.createElement(p.a,{color:"primary",onClick:s,disabled:"loading"===e.entityStatus},l.a.createElement(E.a,null)))})),O=l.a.memo((function(e){var t=Object(r.useState)(!1),a=Object(f.a)(t,2),n=a[0],o=a[1],i=Object(r.useState)(e.value),c=Object(f.a)(i,2),u=c[0],d=c[1];return n?l.a.createElement(m.a,{variant:"outlined",value:u,onChange:function(e){d(e.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),e.onChange(u)}}):l.a.createElement("span",{onDoubleClick:function(){o(!0),d(e.value)}},e.value)})),T=a(302),y=a(301),g=a(317),h=a(155),I=a.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"2a3c113a-9f81-44c2-8055-fcb19926514f"}}),v=function(){return I.get("todo-lists")},k=function(e){return I.post("/todo-lists/",{title:e})},j=function(e){return I.delete("/todo-lists/".concat(e))},S=function(e,t){return I.put("/todo-lists/".concat(e),{title:t})},C=function(e){return I.get("todo-lists/".concat(e,"/tasks"))},A=function(e,t){return I.post("/todo-lists/".concat(e,"/tasks"),{title:t})},w=function(e,t){return I.delete("/todo-lists/".concat(e,"/tasks/").concat(t))},L=function(e,t,a){return I.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},D=function(e){return I.post("/auth/login",e)},R=function(){return I.get("/auth/me")},N=function(){return I.delete("/auth/login")};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(n||(n={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(o||(o={}));var P=function(e){var t=Object(r.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todolistId)}),[e.changeTaskTitle,e.task.id,e.todolistId]);return l.a.createElement("div",{key:e.task.id,className:n.Completed?"is-done":""},l.a.createElement(g.a,{checked:e.task.status===n.Completed,color:"primary",onChange:function(t){var a=t.currentTarget.checked;e.changeTaskStatus(e.task.id,a?n.Completed:n.New,e.todolistId)}}),l.a.createElement(O,{value:e.task.title,onChange:t}),l.a.createElement(p.a,{onClick:function(){return e.removeTask(e.task.id,e.todolistId)}},l.a.createElement(y.a,null)))},F=l.a.memo((function(e){var t=Object(r.useCallback)((function(t){e.addTask(t,e.id)}),[e.addTask,e.id]),a=Object(r.useCallback)((function(){e.removeTodolist(e.id)}),[e.removeTodolist,e.id]),o=Object(r.useCallback)((function(t){e.changeTodolistTitle(e.id,t)}),[e.changeTodolistTitle,e.id]),i=Object(r.useCallback)((function(){return e.changeFilter("all",e.id)}),[e.changeFilter,e.id]),c=Object(r.useCallback)((function(){return e.changeFilter("active",e.id)}),[e.changeFilter,e.id]),u=Object(r.useCallback)((function(){return e.changeFilter("completed",e.id)}),[e.changeFilter,e.id]),d=e.tasks;return"active"===e.filter&&(d=e.tasks.filter((function(e){return e.status===n.New}))),"completed"===e.filter&&(d=e.tasks.filter((function(e){return e.status===n.Completed}))),l.a.createElement("div",null,l.a.createElement("h3",null,l.a.createElement(O,{value:e.title,onChange:o}),l.a.createElement(p.a,{onClick:a,disabled:"loading"===e.entityStatus},l.a.createElement(y.a,null))),l.a.createElement(b,{addItem:t,entityStatus:e.entityStatus}),l.a.createElement("div",null,d.map((function(t){return l.a.createElement(P,{task:t,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus,removeTask:e.removeTask,todolistId:e.id,key:t.id})}))),l.a.createElement("div",null,l.a.createElement(T.a,{variant:"all"===e.filter?"outlined":"text",onClick:i,color:"default"},"All"),l.a.createElement(T.a,{variant:"active"===e.filter?"outlined":"text",onClick:c,color:"primary"},"Active"),l.a.createElement(T.a,{variant:"completed"===e.filter?"outlined":"text",onClick:u,color:"secondary"},"Completed")))})),x=a(110),G=a(18),K=a(19),H=function(e,t){e(Z(t))},U=function(e,t){t.messages.length?e(Z(t.messages[0])):e(Z("Some error occurred")),e(Z("failed"))},M={isLoggedIn:!1},_=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},V={status:"idle",error:null,isInitialized:!1},z=function(e){return{type:"APP/SET-STATUS",payload:{status:e}}},Z=function(e){return{type:"APP/SET-ERROR",payload:{error:e}}},q=a(7),B={},Y=function(e,t,a){return function(n,o){var r=o().tasksReducer[a].find((function(t){return t.id===e}));if(r){var l=Object(G.a)({deadline:r.deadline,description:r.description,priority:r.priority,startDate:r.startDate,title:r.title,status:r.status},t);n(z("loading")),L(a,e,l).then((function(o){0===o.data.resultCode&&(n(function(e,t,a){return{type:"UPDATE-TASK",payload:{model:t,todolistId:a,taskId:e}}}(e,t,a)),n(z("succeeded")))})).catch((function(){})).finally((function(){n(z("idle"))}))}else console.warn("task not found in the state")}},J=[],W=function(){return{type:"CLEAR-TODOLIST"}},$=function(){return function(e){e(z("loading")),v().then((function(t){return e({type:"SET-TODOLISTS",payload:{todolists:t.data}}),t.data})).then((function(t){t.forEach((function(t){var a;e((a=t.id,function(e){e(z("loading")),C(a).then((function(t){e(function(e,t){return{type:"SET_TASK",payload:{todolistID:e,task:t}}}(a,t.data.items)),e(z("succeeded"))})).catch((function(t){H(e,t.message)})).finally((function(){e(e(z("idle")))}))}))}))})).catch((function(t){e(Z(t.message))})).finally((function(){e(e(z("idle")))}))}},Q=a(36),X=a(156),ee=Object(x.b)({todolistsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.payload.todolistId}));case"ADD-TODOLIST":return[Object(G.a)(Object(G.a)({},t.payload.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(K.a)(e));case"SET-TODOLISTS":return t.payload.todolists.map((function(e){return Object(G.a)(Object(G.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-TITLE":var a=e.find((function(e){return e.id===t.payload.todolistId}));return a&&(a.title=t.payload.title),Object(K.a)(e);case"CHANGE-TODOLIST-FILTER":var n=e.find((function(e){return e.id===t.payload.todolistId}));return n&&(n.filter=t.payload.filter),Object(K.a)(e);case"CHANGE-ENTITY-STATUS":return e.map((function(e){return e.id===t.payload.id?Object(G.a)(Object(G.a)({},e),{},{entityStatus:t.payload.entityStatus}):e}));case"CLEAR-TODOLIST":return[];default:return e}},tasksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":var a=Object(G.a)({},e),n=e[t.payload.todolistId],o=n.filter((function(e){return e.id!==t.payload.taskId}));return a[t.payload.todolistId]=o,a;case"ADD-TASK":return Object(G.a)(Object(G.a)({},e),{},Object(q.a)({},t.payload.task.todoListId,[t.payload.task].concat(Object(K.a)(e[t.payload.task.todoListId]))));case"CHANGE-TASK-STATUS":return e[t.payload.todolistId]=e[t.payload.todolistId].map((function(e){return e.id===t.payload.taskId?Object(G.a)(Object(G.a)({},e),{},{isDone:t.payload.status}):e})),Object(G.a)({},e);case"CHANGE-TASK-TITLE":return e[t.payload.todolistId]=e[t.payload.todolistId].map((function(e){return e.id===t.payload.taskId?Object(G.a)(Object(G.a)({},e),{},{title:t.payload.title}):e})),Object(G.a)({},e);case"ADD-TODOLIST":return Object(G.a)(Object(G.a)({},e),{},Object(q.a)({},t.payload.todolist.id,[]));case"SET-TODOLISTS":var r=Object(G.a)({},e);return t.payload.todolists.find((function(e){r[e.id]=[]})),r;case"REMOVE-TODOLIST":var l=Object(G.a)({},e);return delete l[t.payload.todolistId],l;case"SET_TASK":var i=Object(G.a)({},e);return i[t.payload.todolistID]=t.payload.task,i;case"UPDATE-TASK":return Object(G.a)(Object(G.a)({},e),{},Object(q.a)({},t.payload.todolistId,e[t.payload.todolistId].map((function(e){return e.id===t.payload.taskId?Object(G.a)(Object(G.a)({},e),t.payload.model):e}))));case"CLEAR-TODOLIST":return{};default:return e}},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(G.a)(Object(G.a)({},e),{},{status:t.payload.status});case"APP/SET-ERROR":return Object(G.a)(Object(G.a)({},e),{},{error:t.payload.error});case"SET-IS-INITIALIZED":return Object(G.a)(Object(G.a)({},e),{},{isInitialized:t.payload.isInitialized});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(G.a)(Object(G.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),te=Object(x.c)(ee,Object(x.a)(X.a)),ae=Q.c;window.store=te;var ne=a(17),oe=function(){var e=Object(Q.c)((function(e){return e.authReducer.isLoggedIn})),t=ae((function(e){return e.todolistsReducer})),a=ae((function(e){return e.tasksReducer})),n=Object(Q.b)();Object(r.useEffect)((function(){e&&n($())}),[n]);var o=Object(r.useCallback)((function(e,t){n(function(e,t){return function(a){a(z("loading")),w(e,t).then((function(n){0===n.data.resultCode&&(a(function(e,t){return{type:"REMOVE-TASK",payload:{todolistId:t,taskId:e}}}(t,e)),a(z("succeeded")))})).catch((function(e){H(a,e.message)})).finally((function(){a(a(z("idle")))}))}}(t,e))}),[n]),i=Object(r.useCallback)((function(e,t){n(function(e,t){return function(a){a(z("loading")),A(e,t).then((function(e){0===e.data.resultCode?(a({type:"ADD-TASK",payload:{task:e.data.data.item}}),a(z("succeeded"))):U(a,e.data)})).catch((function(e){H(a,e.message)})).finally((function(){a(a(z("idle")))}))}}(t,e))}),[n]),c=Object(r.useCallback)((function(e,t,a){n(Y(e,{status:t},a))}),[n]),u=Object(r.useCallback)((function(e,t,a){n(Y(e,{title:t},a))}),[n]),f=Object(r.useCallback)((function(e,t){n(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",payload:{filter:t,todolistId:e}}}(t,e))}),[n]),m=Object(r.useCallback)((function(e){var t;n((t=e,function(e){e(z("loading")),e({type:"CHANGE-ENTITY-STATUS",payload:{entityStatus:"loading",id:t}}),j(t).then((function(a){0===a.data.resultCode&&e(function(e){return{type:"REMOVE-TODOLIST",payload:{todolistId:e}}}(t))})).catch((function(t){H(e,t.message)})).finally((function(){e(e(z("idle")))}))}))}),[n]),p=Object(r.useCallback)((function(e,t){n(function(e,t){return function(a){a(z("loading")),S(e,t).then((function(n){0===n.data.resultCode&&a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",payload:{title:t,todolistId:e}}}(e,t))})).catch((function(e){H(a,e.message)})).finally((function(){a(a(z("idle")))}))}}(e,t))}),[n]),E=Object(r.useCallback)((function(e){n(function(e){return function(t){t(z("loading")),k(e).then((function(e){0===e.data.resultCode?t({type:"ADD-TODOLIST",payload:{todolist:e.data.data.item}}):U(t,e.data)})).catch((function(e){H(t,e.message)})).finally((function(){t(t(z("idle")))}))}}(e))}),[n]);return e?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{container:!0,style:{padding:"20px"}},l.a.createElement(b,{addItem:E})),l.a.createElement(d.a,{container:!0,spacing:3},t.map((function(e){return l.a.createElement(d.a,{item:!0,key:e.id},l.a.createElement(s.a,{style:{padding:"10px"}},l.a.createElement(F,{key:e.id,id:e.id,title:e.title,entityStatus:e.entityStatus,tasks:a[e.id],removeTask:o,changeFilter:f,addTask:i,changeTaskStatus:c,filter:e.filter,removeTodolist:m,changeTaskTitle:u,changeTodolistTitle:p})))})))):l.a.createElement(ne.a,{to:"login"})},re=a(163),le=a.n(re),ie=a(169),ce=a.n(ie),ue=a(165),de=a.n(ue),se=a(166),fe=a.n(se),me=a(167),pe=a.n(me),Ee=a(168),be=a.n(Ee),Oe=a(164),Te=a.n(Oe),ye=a(316),ge=a(313),he=l.a.forwardRef((function(e,t){return l.a.createElement(ge.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))}));function Ie(){var e=ae((function(e){return e.appReducer.error})),t=Object(Q.b)(),a=function(e,a){"clickaway"!==a&&t(Z(null))};return l.a.createElement(ye.a,{open:!!e,autoHideDuration:6e3,onClose:a},l.a.createElement(he,{onClose:a,severity:"error",sx:{width:"100%"}},e))}var ve=a(321),ke=a(315),je=a(318),Se=a(319),Ce=a(323),Ae=a(308),we=a(311),Le=a(322),De=a(170),Re=function(){var e=Object(Q.c)((function(e){return e.authReducer.isLoggedIn})),t=Object(Q.b)(),a=Object(De.a)({initialValues:{password:"",email:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<5&&(t.password="Password length must be atleast 5 characters"):t.password="Required",t},onSubmit:function(e){var a;t((a=e,function(e){e(z("loading")),D(a).then((function(t){0===t.data.resultCode?e(_(!0)):U(e,t.data)})).catch((function(t){H(e,t.message)})).finally((function(){e(e(z("idle")))}))}))}});return e?l.a.createElement(ne.a,{to:"/"}):l.a.createElement(ve.a,{container:!0,justifyContent:"center"},l.a.createElement(ve.a,{item:!0,justifyContent:"center"},l.a.createElement(je.a,null,l.a.createElement(Ae.a,null,l.a.createElement("p",null,"To log in get registered",l.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),l.a.createElement("p",null,"or use common test account credentials:"),l.a.createElement("p",null,"Email: free@samuraijs.com"),l.a.createElement("p",null,"Password: free")),l.a.createElement("form",{onSubmit:a.handleSubmit},l.a.createElement(Ce.a,null,l.a.createElement(we.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&l.a.createElement("div",{style:{color:"red"}},a.errors.email),l.a.createElement(we.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&l.a.createElement("div",{style:{color:"red"}},a.errors.password),l.a.createElement(Se.a,{label:"Remember me",control:l.a.createElement(ke.a,a.getFieldProps("rememberMe"))}),l.a.createElement(Le.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Ne=a(161),Pe=a.n(Ne),Fe=function(){return l.a.createElement("div",{className:Pe.a.error},l.a.createElement("h1",null,"404 Page not found"))},xe=a(162),Ge=a.n(xe);var Ke=function(){var e=ae((function(e){return e.appReducer.status})),t=ae((function(e){return e.appReducer.isInitialized})),a=Object(Q.c)((function(e){return e.authReducer.isLoggedIn})),n=Object(Q.b)();return Object(r.useEffect)((function(){n((function(e){R().then((function(t){0===t.data.resultCode&&e(_(!0))})).finally((function(){e({type:"SET-IS-INITIALIZED",payload:{isInitialized:!0}})}))}))}),[]),t?l.a.createElement("div",{className:"App"},l.a.createElement(le.a,{position:"static"},l.a.createElement(Te.a,null,l.a.createElement(de.a,{edge:"start",color:"inherit","aria-label":"menu"},l.a.createElement(u.a,null)),l.a.createElement(fe.a,{variant:"h6"},"News"),a&&l.a.createElement(pe.a,{color:"inherit",onClick:function(){n((function(e){e(z("loading")),N().then((function(t){0===t.data.resultCode?(e(_(!1)),e(z("succeeded")),e(W())):U(e,t.data)})).catch((function(t){H(e,t.message)}))}))}},"Logout"))),"loading"===e&&l.a.createElement(be.a,{color:"secondary"}),l.a.createElement(ce.a,{fixed:!0},l.a.createElement(ne.d,null,l.a.createElement(ne.b,{path:"/",element:l.a.createElement(oe,null)}),l.a.createElement(ne.b,{path:"login",element:l.a.createElement(Re,null)}),l.a.createElement(ne.b,{path:"404",element:l.a.createElement(Fe,null)}),l.a.createElement(ne.b,{path:"*",element:l.a.createElement(ne.a,{to:"404"})}))),l.a.createElement(Ie,null)):l.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},l.a.createElement(Ge.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=a(79);c.a.render(l.a.createElement(Q.a,{store:te},l.a.createElement(He.a,null,l.a.createElement(Ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[184,1,2]]]);
//# sourceMappingURL=main.a3ad1579.chunk.js.map